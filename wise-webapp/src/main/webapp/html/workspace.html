<!DOCTYPE html>
<html>
<head>
    <title>WiseMApping Workspace</title>

    <!--Table Styles-->

    <!--Less CSS Framework-->
    <link rel="stylesheet/less" type="text/css" href="css/styles.less">
    <link rel="stylesheet/less" type="text/css" href="css/table.less">
    <script src="js/less-1.1.3.min.js" type="text/javascript"></script>


    <!--jQuery DataTables-->
    <script type="text/javascript" language="javascript" src="js/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery-ui-1.8.16.custom.min.js"></script>
    <link href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet">
    <script type="text/javascript" language="javascript" src="js/jquery.dataTables.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery.dataTables.plugins.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(function() {
            $('#map-table').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="maps"></table>' );
            var table = $('#maps').dataTable( {
                "bProcessing" : true,
                "sAjaxSource" : "json_source.txt",
                "aoColumns": [
                    {
                        "sTitle" : '<input type="checkbox" id="selectAll"/>',
                        "sClass" : "center select", "sWidth" : "15px",
                        "bSortable" : false, "bSearchable" : false,
                        "fnRender" : function(obj) {
                            var id = obj.aData[0];
                            return '<input type="checkbox" id="'+id+'"/>';
                        }
                    },
                    {
                        "sTitle" : "Titre",
                        "fnRender" : function(obj) {
                            return obj.aData[1] + " <span class='tag'>"+obj.aData[2]+"</span>";
                        }
                    },
                    { "sTitle" : "Tags", "bVisible" : false },
                    { "sTitle": "Utillisateurs" },
                    {
                        "sTitle" : "date",
                        "sType" : "es_date",
                        "bVisible" : false, "bSearchable" : false,
                        "fnRender" :function(obj) {
                            return obj.aData[4];
                        }
                    },
                    {
                        "sTitle": "Derniere modification",
                        "fnRender" : function(obj) {
                            return obj.aData[4] + " " + obj.aData[5];
                        },
                        "iDataSort" : 4
                    },
                    {
                        "sTitle": "Details",
                        "sClass": "center",
                        "sWidth" : "15px",
                        "bSortable" : false, "bSearchable" : false,
                        "fnRender" : function(obj) {
                            return '<span class="ui-icon ui-icon-triangle-1-e" style="margin: 0 auto;"></span>';
                        }
                    }

                ],
                "bAutoWidth" : false,
                "bLengthChange": false,
                "bInfo": false,
                "bPaginate": false
            });

            $('#maps_filter').appendTo("#toolbar");

            $('input:checkbox[id="selectAll"]').click(function() {
                $("#maps").dataTableExt.selectAllMaps();
            });
        });




    </script>

    <!--Tags-->
    <script type="text/javascript" charset="utf-8">

        var tags = ['ThinkMapping', 'Akostic', 'Clients', 'Favoris'];
        var html = "";

        $(function() {
            for (i in tags) {
                html += "<button>"+ tags[i] +"</button>";
            }

            $("#tags-list").html(html);
            $("#tags-list button" ).button({
                icons: { primary: "ui-icon-folder-collapsed" }
            });

            $("#tags-actions button" ).button({
                icons: { primary: "ui-icon-plus" }
            });
        });
    </script>

    <!--Toolbar-->
    <script type="text/javascript" charset="utf-8">
        $(function() {
            $("#show-tags").click(function() {

            })
        });
    </script>

    <!--Buttons-->
    <script type="text/javascript" charset="utf-8">
        $(function() {
            $("#buttons .show-tags").button({
                icons: { primary: "ui-icon-folder-open" }
            });
            $("#buttons .share").button({
                icons: { primary: "ui-icon-transferthick-e-w" }
            });

            $("#buttons .delete").button({
                icons: { primary: "ui-icon-trash" }
            }).click(function() {
                        var selectedMaps = $('#maps').dataTableExt.getSelectedMaps();
                        console.log("Delete maps: " +selectedMaps);
                        var html2 = $('#delete-dialog-modal p span').html(selectedMaps.toString());
                        console.log(html2);

                        $( "#delete-dialog-modal" ).dialog({
                            height: 140,
                            modal: true,
                            buttons: {
                                "Delete": function() {
                                    $( this ).dialog( "close" );
                                },
                                Cancel: function() {
                                    $( this ).dialog( "close" );
                                }
                            }
                        });
                    });
        })
    </script>
</head>

<body>
<div id="wrapper">
    <div id="toolbar" class="toolbar">

    </div>

    <div id="buttons">
        <div id="delete-dialog-modal" title="Delete maps" style="display: none">
            <p>Are you sure you want to delete maps <span></span> ?</p>
        </div>
        <button class="show-tags">Organiser</button>
        <button class="share">Partager</button>
        <button class="delete">Supprimer</button>
    </div>

    <div>
        <div id="tags">
            <h2>Mes dossiers:</h2>
            <div id="tags-list"></div>
            <div id="tags-actions">
                <button>Nouveau Dossier</button>
            </div>
        </div>
        <div id="map-table"></div>
    </div>
</div>
</body>
</html>