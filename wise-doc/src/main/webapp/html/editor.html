<!DOCTYPE HTML>

<html>
<head>
    <!--[if lt IE 9]>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <![endif]-->
    <script type="text/javascript" src="http://docs.google.com/brix/static/api/js/jsapi.nocache.js"></script>
    <!-- Internet Explorer 8 Hack -->
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8"/>
    <title>WiseMapping - Editor </title>
    <link rel="stylesheet" type="text/css" href="../css/editor.css"/>
    <link rel="stylesheet" type="text/css" href="../css/bubble.css"/>

    <!--<script type='text/javascript' src='../js/wiseLibrary.js'></script>-->

    <!--<script type='text/javascript' src='http://docs.google.com/brix/static/api/js/jsapi.nocache.js'></script>-->
    <script type='text/javascript' src='../js/mootools-core-1.3.2-full-compat.js'></script>
    <script type='text/javascript' src='../js/mootools-more-1.3.2.1-yui.js'></script>

    <!--<script type='text/javascript' src='../js/common.js'></script>-->
    <!--<script type='text/javascript' src='../js/windoo.js'></script>-->

    <!--<script type='text/javascript' src='../js/wiseEditorLibrary.js'></script>-->
    <!--<script type='text/javascript' src='../js/IconPanel.js'></script>-->
    <!--<script type='text/javascript' src='../js/mooRainbow.js'></script>-->


    <script type='text/javascript' src='../../../../../wise-webapp/src/main/webapp/js/mooRainbow.js'></script>

    <script type='text/javascript' src='../js/core.js'></script>
    <script type="text/javascript">
        //Google-Brix framework load callback function
        collabOnLoad = function() {
            isGoogleBrix=true;
            if(typeof mindplot != "undefined"){
                console.log("calling");
                mindplot.collaboration.frameworks.brix.BrixFramework.instanciate();
            }
        };
    </script>

    <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
</head>
<body>

<form method="post" id="printForm" name="printForm" action='' style="height:100%;" target="${mindmap.title}">
    <input type="hidden" name="action" value="print">
    <input type="hidden" name="mapId" value="${mindmap.id}">
    <input type="hidden" name="mapSvg" value="">
</form>

<div id="waitDialog" style="display:none">
    <div id="waitingContainer">
        <div class="loadingIcon"></div>
        <div class="loadingText">
            Loading ...
        </div>
    </div>
</div>

<div id="errorDialog" style="display:none">
    <div id="errorContainer">
        <div class="loadingIcon"></div>
        <div class="loadingText">
            Unexpected error loading your map :(
        </div>
    </div>
</div>

<script type="text/javascript">

    var waitDialog = new core.WaitDialog();
    waitDialog.activate(true, $("waitDialog"));
    $(window).addEvent("error", function(event) {

        // Show error dialog ...
        waitDialog.changeContent($("errorDialog"), false);
        return false;
    });

    // @Todo: This must be persited in the map properties ...
    var mapId = '1';
    var mapXml = '<map name="38298" version="pela"><topic central="true" text="test" id="1"/></map>';
    var editorProperties = {zoom:0.85,saveOnLoad:true};


</script>

<div id="colorPalette">
    <div id="paletteHeader"></div>
</div>

<div id="actionsContainer">
</div>

<div id="toolbar">
    <div id="editTab" class="tabContent">
        <div id="file" class="buttonContainer" title="SYMB_ FILE">
            <fieldset>
                <div id="undoEdition" class="button" title="Undo Edition">
                    <div class="toolbarLabel">
                        <p>Undo</p>
                    </div>
                </div>
                <div id="redoEdition" class="button" title="Redo Edition">
                    <div class="toolbarLabel">
                        <p>Redo</p>
                    </div>
                </div>
            </fieldset>
        </div>
        <div id="zoom" class="buttonContainer" title="Zoom In">
            <fieldset>
                <div id="zoomIn" class="button" title="Zoom In">
                    <div class="toolbarLabel">
                        <p>In</p>
                    </div>
                </div>
                <div id="zoomOut" class="button" title="Zoom Out">
                    <div class="toolbarLabel">
                        <p>Out</p>
                    </div>
                </div>
            </fieldset>
        </div>
        <div id="node" class="buttonContainer" title="Node Properties">
            <fieldset>
                <div id="topicShape" class="button comboButton" title="SYMB_TOPIC_SHAPE">
                    <div class="toolbarLabel">
                        <p>Shape</p>
                    </div>
                </div>
                <div id="addTopic" class="button" title="SYMB_ TOPIC_ADD">
                    <div class="toolbarLabel">
                        <p>Add</p>
                    </div>
                </div>
                <div id="deleteTopic" class="button" title="SYMB_ TOPIC_DELETE">
                    <div class="toolbarLabel">
                        <p>Delete</p>
                    </div>
                </div>
                <div id="topicBorder" class="button comboButton" title="SYMB_ TOPIC_BORDER_COLOR">
                    <div class="toolbarLabel">
                        <p>Border</p>
                    </div>
                </div>
                <div id="topicColor" class="button comboButton" title="Background Color">
                    <div class="toolbarLabel">
                        <p>Color</p>
                    </div>
                </div>
                <div id="topicIcon" class="button comboButton" title="Change Icon">
                    <div class="toolbarLabel">
                        <p>Icon</p>
                    </div>
                </div>
                <div id="topicNote" class="button comboButton" title="Add Note">
                    <div class="toolbarLabel">
                        <p>Note</p>
                    </div>
                </div>
                <div id="topicLink" class="button" title="Add Link">
                    <div class="toolbarLabel">
                        <p>Link</p>
                    </div>
                </div>
                <div id="topicRelation" class="topicRelation button" title="Add Relationship">
                    <div class="relationshiplabel toolbarLabel">
                        <p>Relationship</p>
                    </div>
                </div>
            </fieldset>
        </div>
        <div id="font" class="buttonContainer" title="Font Properties">
            <fieldset>
                <div id="fontFamily" class="button comboButton" title="Font Style">
                    <div class="toolbarLabel">
                        <p>Style</p>
                    </div>
                </div>
                <div id="fontSize" class="button comboButton" title="Font Size">
                    <div class="toolbarLabel">
                        <p>Size</p>
                    </div>
                </div>
                <div id="fontBold" class="button" title="Bold Style">
                    <div class="toolbarLabel">
                        <p>Bold</p>
                    </div>
                </div>
                <div id="fontItalic" class="button" title="Italic Style">
                    <div class="toolbarLabel">
                        <p>Italic</p>
                    </div>
                </div>
                <div id="fontColor" class="button comboButton" title="Fond Color">
                    <div class="toolbarLabel">
                        <p>Color</p>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
</div>

<div id="mindplot"></div>

<div id="footerEditor">
    <div style="position:absolute; top:0px; width:100%">
        <a href="home.htm">
            <div id="logo"></div>
        </a>

        <div id='msgLoggerContainer' class="msgLoggerContainer">
            <div id="msgStart"></div>
            <div id='msgLogger'></div>
            <div id="msgEnd"></div>
        </div>
    </div>
    <div id="helpButtonKeyboard"
         style="text-align:center; width:100px; height:20px; background-color:#f5f5f5; border: 1px solid #BBB6D6; cursor:pointer; padding-left:5px; margin-left:3px;float:left;">
        <div style="float:left; position:relative; top:50%; margin-top:-8px; margin-left:5px;"><img
                src="../images/help.png"/></div>
        <div style="float:left; position:relative; top:50%; margin-top:-8px; margin-left:4px;">Shortcuts</div>
    </div>
</div>
<div id="ffoxworkarround" style="display:none;"><input id="ffoxWorkarroundInput" type="text"></div>
<script type="text/javascript" src="../js/editor.js"></script>
</body>
</html>
